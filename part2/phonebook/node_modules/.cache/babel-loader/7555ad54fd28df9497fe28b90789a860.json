{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hites\\\\OneDrive\\\\Desktop\\\\Full_Stack_Open\\\\part2\\\\phonebook\\\\src\\\\components\\\\App.js\";\nimport React, { useState, useEffect } from 'react';\nimport personService from '../services/persons';\n\nconst Notification = ({\n  notify\n}) => {\n  if (notify === null) {\n    return null;\n  }\n\n  const {\n    message,\n    className\n  } = notify;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: className,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 5\n    }\n  }, message);\n};\n\nconst Persons = ({\n  filterPersons,\n  handleDelete\n}) => {\n  return filterPersons.map(person => /*#__PURE__*/React.createElement(\"p\", {\n    key: person.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 42\n    }\n  }, person.name, \" \", person.number, \" \", /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleDelete(person.id, person.name),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 91\n    }\n  }, \"delete\")));\n};\n\nconst PersonForm = ({\n  setPersons,\n  persons,\n  setMessage\n}) => {\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n\n  const handleNameChange = event => setNewName(event.target.value);\n\n  const handleNumberChange = event => setNewNumber(event.target.value);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const newPhonebook = {\n      name: newName,\n      number: newNumber\n    };\n    const existingPerson = persons.find(person => person.name === newName);\n\n    if (existingPerson !== undefined) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        personService.putPerson(newPhonebook, existingPerson.id).then(returnedPerson => {\n          setPersons(persons.map(person => person.id === returnedPerson.id ? returnedPerson : person));\n          setMessage({\n            message: `Updated ${returnedPerson.name}`,\n            className: 'success'\n          });\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        }).catch(error => {\n          setMessage({\n            message: error.response.data.error,\n            className: 'error'\n          });\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        });\n      }\n    } else {\n      personService.postPerson(newPhonebook).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setMessage({\n          message: `Added ${returnedPerson.name}`,\n          className: 'success'\n        });\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      }).catch(error => {\n        setMessage({\n          message: error.response.data.error,\n          className: 'error'\n        });\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      });\n    }\n\n    setNewName('');\n    setNewNumber('');\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, \"name: \", /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleNameChange,\n    value: newName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, \"number: \", /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleNumberChange,\n    value: newNumber,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, \"add\")));\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filter, setFilter] = useState('');\n  const [filterPersons, setFilterPersons] = useState(persons);\n  const [message, setMessage] = useState(null);\n\n  const handleFilterChange = event => {\n    setFilter(event.target.value);\n    setFilterPersons(persons.filter(person => person.name.toLowerCase().indexOf(event.target.value.toLowerCase()) !== -1));\n  };\n\n  const handleDelete = (id, name) => {\n    if (window.confirm(`Delete ${name}`)) {\n      personService.deletePerson(id).then(() => {\n        personService.getPersons().then(persons => {\n          setPersons(persons);\n        });\n      }).catch(error => {\n        setMessage({\n          message: `Information of ${name} has already been removed from server`,\n          className: 'error'\n        });\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      });\n    }\n  };\n\n  useEffect(() => {\n    personService.getPersons().then(persons => {\n      setPersons(persons);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, \"Phonebook\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }, \"filter shown with \", /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleFilterChange,\n    value: filter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(Notification, {\n    notify: message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }, \"add a new\"), /*#__PURE__*/React.createElement(PersonForm, {\n    setPersons: setPersons,\n    setMessage: setMessage,\n    persons: persons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, \"Numbers\"), filter === '' ? /*#__PURE__*/React.createElement(Persons, {\n    handleDelete: handleDelete,\n    filterPersons: persons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 24\n    }\n  }) : /*#__PURE__*/React.createElement(Persons, {\n    handleDelete: handleDelete,\n    filterPersons: filterPersons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 89\n    }\n  }));\n};\n\nexport default App;","map":{"version":3,"sources":["C:/Users/hites/OneDrive/Desktop/Full_Stack_Open/part2/phonebook/src/components/App.js"],"names":["React","useState","useEffect","personService","Notification","notify","message","className","Persons","filterPersons","handleDelete","map","person","id","name","number","PersonForm","setPersons","persons","setMessage","newName","setNewName","newNumber","setNewNumber","handleNameChange","event","target","value","handleNumberChange","handleSubmit","preventDefault","newPhonebook","existingPerson","find","undefined","window","confirm","putPerson","then","returnedPerson","setTimeout","catch","error","response","data","postPerson","concat","App","filter","setFilter","setFilterPersons","handleFilterChange","toLowerCase","indexOf","deletePerson","getPersons"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport personService from '../services/persons'\n \nconst Notification = ({notify}) => {\n  if (notify === null) {\n    return null\n  }\n  const {message , className} = notify\n  return (\n    <div className={className}>\n      {message}\n    </div>\n  )\n}\n\nconst Persons = ({filterPersons,handleDelete}) => {\n    return filterPersons.map((person) => <p key={person.id}>{person.name} {person.number} <button onClick={() => handleDelete(person.id,person.name)}>delete</button></p>)\n}\n\nconst PersonForm = ({setPersons, persons, setMessage}) => {\n\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  \n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n\n    const newPhonebook = {\n      name: newName,\n      number: newNumber\n    }\n    const existingPerson = persons.find((person) => person.name === newName)\n    \n    if( existingPerson !== undefined){\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n        personService\n        .putPerson(newPhonebook,existingPerson.id)\n        .then((returnedPerson) => {\n          setPersons(persons.map(person => person.id === returnedPerson.id ? returnedPerson : person))\n          setMessage({message:`Updated ${returnedPerson.name}`, className: 'success'})\n          setTimeout(() => {\n            setMessage(null)\n          },5000)\n        })\n        .catch((error) => {\n          setMessage({message: error.response.data.error,className: 'error'})\n          setTimeout(()=>{\n            setMessage(null)\n          },5000)\n        })\n      }\n    }\n    else{\n      personService\n      .postPerson(newPhonebook)\n      .then((returnedPerson)=>{\n        setPersons(persons.concat(returnedPerson))\n        setMessage({message:`Added ${returnedPerson.name}`, className: 'success'})\n        setTimeout(() => {\n          setMessage(null)\n        },5000)\n      })\n      .catch((error) => {\n        setMessage({message: error.response.data.error,className: 'error'})\n        setTimeout(()=>{\n          setMessage(null)\n        },5000)\n      })\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n\n  return (\n      <form onSubmit={handleSubmit}>\n      <div>\n        name: <input \n              onChange={handleNameChange} \n              value={newName}\n              />\n      </div>\n      <div>\n        number: <input \n              onChange={handleNumberChange} \n              value={newNumber}\n              />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ filter, setFilter ] = useState('')\n  const [ filterPersons, setFilterPersons] = useState(persons)\n  const [ message, setMessage ] = useState(null)\n\n  const handleFilterChange = (event) => {\n      setFilter(event.target.value)\n      setFilterPersons(persons.filter((person) => (person.name.toLowerCase().indexOf(event.target.value.toLowerCase()) !== -1 )));\n  }\n\n  const handleDelete = (id,name) => {\n    if(window.confirm(`Delete ${name}`)){\n      personService\n      .deletePerson(id)\n      .then(()=>{\n        personService\n        .getPersons()\n        .then(persons => {\n          setPersons(persons)\n        })\n      })\n      .catch(error => {\n        setMessage({ message:`Information of ${name} has already been removed from server`, className: 'error'})\n        setTimeout(() => {\n          setMessage(null)\n        },5000)\n      })\n    }\n  }\n\n  useEffect(() => {\n      personService\n      .getPersons()\n      .then(persons => {\n        setPersons(persons)\n      })\n      \n  },[])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <div>\n          filter shown with <input onChange={handleFilterChange} value={filter}></input>\n      </div>\n      <Notification notify={message}/>\n      <h2>add a new</h2>\n      <PersonForm setPersons={setPersons} setMessage={setMessage} persons={persons}/>\n      <h2>Numbers</h2>\n      {filter === '' ? <Persons handleDelete={handleDelete} filterPersons={persons}/> : <Persons handleDelete={handleDelete} filterPersons={filterPersons}/>}\n    </div>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}