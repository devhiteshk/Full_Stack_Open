(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},19:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),u=(n(19),n(2)),l=n(3),i=n.n(l),s="https://stark-woodland-44857.herokuapp.com/api/persons",m=function(){return i.a.get(s).then((function(e){return e.data}))},f=function(e){return i.a.post(s,e).then((function(e){return e.data}))},d=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},h=function(e,t){return i.a.put("".concat(s,"/").concat(t),e).then((function(e){return e.data}))},b=function(e){var t=e.notify;if(null===t)return null;var n=t.message,a=t.className;return r.a.createElement("div",{className:a},n)},p=function(e){var t=e.filterPersons,n=e.handleDelete;return t.map((function(e){return r.a.createElement("p",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return n(e.id,e.name)}},"delete"))}))},v=function(e){var t=e.setPersons,n=e.persons,c=e.setMessage,o=Object(a.useState)(""),l=Object(u.a)(o,2),i=l[0],s=l[1],m=Object(a.useState)(""),d=Object(u.a)(m,2),b=d[0],p=d[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={name:i,number:b},r=n.find((function(e){return e.name===i}));void 0!==r?window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))&&h(a,r.id).then((function(e){t(n.map((function(t){return t.id===e.id?e:t}))),c({message:"Updated ".concat(e.name),className:"success"}),setTimeout((function(){c(null)}),5e3)})):f(a).then((function(e){t(n.concat(e)),c({message:"Added ".concat(e.name),className:"success"}),setTimeout((function(){c(null)}),5e3)})),s(""),p("")}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:function(e){return s(e.target.value)},value:i})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:function(e){return p(e.target.value)},value:b})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},E=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),l=Object(u.a)(o,2),i=l[0],s=l[1],f=Object(a.useState)(n),h=Object(u.a)(f,2),E=h[0],g=h[1],w=Object(a.useState)(null),O=Object(u.a)(w,2),j=O[0],k=O[1],S=function(e,t){window.confirm("Delete ".concat(t))&&d(e).then((function(){m().then((function(e){c(e)}))})).catch((function(e){k({message:"Information of ".concat(t," has already been removed from server"),className:"error"}),setTimeout((function(){k(null)}),5e3)}))};return Object(a.useEffect)((function(){m().then((function(e){c(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{onChange:function(e){s(e.target.value),g(n.filter((function(t){return-1!==t.name.toLowerCase().indexOf(e.target.value.toLowerCase())})))},value:i})),r.a.createElement(b,{notify:j}),r.a.createElement("h2",null,"add a new"),r.a.createElement(v,{setPersons:c,setMessage:k,persons:n}),r.a.createElement("h2",null,"Numbers"),""===i?r.a.createElement(p,{handleDelete:S,filterPersons:n}):r.a.createElement(p,{handleDelete:S,filterPersons:E}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.aa51ac84.chunk.js.map