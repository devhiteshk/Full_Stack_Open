{"version":3,"sources":["services/persons.js","components/App.js","index.js"],"names":["baseURL","axios","get","then","response","data","person","post","id","delete","newPhonebook","put","Notification","notify","message","className","Persons","filterPersons","handleDelete","map","key","name","number","onClick","PersonForm","setPersons","persons","setMessage","useState","newName","setNewName","newNumber","setNewNumber","onSubmit","event","preventDefault","existingPerson","find","undefined","window","confirm","personService","returnedPerson","setTimeout","concat","onChange","target","value","type","App","filter","setFilter","setFilterPersons","catch","error","useEffect","toLowerCase","indexOf","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.aa51ac84.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseURL = \"https://stark-woodland-44857.herokuapp.com/api/persons\"\n\nconst getPersons = () => {\n     const request = axios.get(baseURL)\n     return request.then(response => response.data)\n}\n\nconst postPerson = (person) => {\n    const request =  axios.post(baseURL,person)\n    return request.then( response => response.data)\n}\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`${baseURL}/${id}`)\n    return request.then( response => response.data)\n}\n\nconst putPerson = (newPhonebook,id) => {\n    const request = axios.put(`${baseURL}/${id}`,newPhonebook)\n    return request.then(response => response.data)\n}\nexport default {\n    getPersons,\n    postPerson,\n    deletePerson,\n    putPerson\n}","import React, { useState, useEffect } from 'react'\nimport personService from '../services/persons'\n \nconst Notification = ({notify}) => {\n  if (notify === null) {\n    return null\n  }\n  const {message , className} = notify\n  return (\n    <div className={className}>\n      {message}\n    </div>\n  )\n}\n\nconst Persons = ({filterPersons,handleDelete}) => {\n    return filterPersons.map((person) => <p key={person.id}>{person.name} {person.number} <button onClick={() => handleDelete(person.id,person.name)}>delete</button></p>)\n}\n\nconst PersonForm = ({setPersons, persons, setMessage}) => {\n\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  \n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n\n    const newPhonebook = {\n      name: newName,\n      number: newNumber\n    }\n    const existingPerson = persons.find((person) => person.name === newName)\n    \n    if( existingPerson !== undefined){\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n        personService\n        .putPerson(newPhonebook,existingPerson.id)\n        .then((returnedPerson) => {\n          setPersons(persons.map(person => person.id === returnedPerson.id ? returnedPerson : person))\n          setMessage({message:`Updated ${returnedPerson.name}`, className: 'success'})\n          setTimeout(() => {\n            setMessage(null)\n          },5000)\n        })\n      }\n    }\n    else{\n      personService\n      .postPerson(newPhonebook)\n      .then((returnedPerson)=>{\n        setPersons(persons.concat(returnedPerson))\n        setMessage({message:`Added ${returnedPerson.name}`, className: 'success'})\n        setTimeout(() => {\n          setMessage(null)\n        },5000)\n      })\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n\n  return (\n      <form onSubmit={handleSubmit}>\n      <div>\n        name: <input \n              onChange={handleNameChange} \n              value={newName}\n              />\n      </div>\n      <div>\n        number: <input \n              onChange={handleNumberChange} \n              value={newNumber}\n              />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ filter, setFilter ] = useState('')\n  const [ filterPersons, setFilterPersons] = useState(persons)\n  const [ message, setMessage ] = useState(null)\n\n  const handleFilterChange = (event) => {\n      setFilter(event.target.value)\n      setFilterPersons(persons.filter((person) => (person.name.toLowerCase().indexOf(event.target.value.toLowerCase()) !== -1 )));\n  }\n\n  const handleDelete = (id,name) => {\n    if(window.confirm(`Delete ${name}`)){\n      personService\n      .deletePerson(id)\n      .then(()=>{\n        personService\n        .getPersons()\n        .then(persons => {\n          setPersons(persons)\n        })\n      })\n      .catch(error => {\n        setMessage({ message:`Information of ${name} has already been removed from server`, className: 'error'})\n        setTimeout(() => {\n          setMessage(null)\n        },5000)\n      })\n    }\n  }\n\n  useEffect(() => {\n      personService\n      .getPersons()\n      .then(persons => {\n        setPersons(persons)\n      })\n      \n  },[])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <div>\n          filter shown with <input onChange={handleFilterChange} value={filter}></input>\n      </div>\n      <Notification notify={message}/>\n      <h2>add a new</h2>\n      <PersonForm setPersons={setPersons} setMessage={setMessage} persons={persons}/>\n      <h2>Numbers</h2>\n      {filter === '' ? <Persons handleDelete={handleDelete} filterPersons={persons}/> : <Persons handleDelete={handleDelete} filterPersons={filterPersons}/>}\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}